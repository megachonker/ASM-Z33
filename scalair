// x² − 2xy − y²

vax: .word 9
vay: .word 8
vac: .word 7
vbx: .word 1
vby: .word 2
vbc: .word 3

prodscal:
    push 0  // P contien le resulstat
    ld 0,%b //init le compteur
loop:
    jmp produit
    retour:
    add 1,%b // incrémente le conteur
    ld [%sp+2],%a
    cmp %b,%a
    debugreg
    jne loop    // }
    pop %a
    rtn

produit:
    //%b est l'indice
    ld  [%sp+3],%a  //on charge l'adresse du va du staque
    add %b,%a       //on shiff l'adresse de l'incice
    ld [%a],%a      //charge vecteur b
    push %a         //save le vecteur charger

    //on part du principe que les vecteur ne sont pas coller
    ld  [%sp+5],%a  //on charge l'adresse du va du staque
    add %b,%a       //on shiff l'adresse de l'incice
    ld [%a],%a      //charge vecteur a

    push %b         //on save l'incice
    ld [%sp+1],%b   //on charge la ligne du vecteur b
    mul %b,%a      //va.X*vb.X
    ld [%sp+2],%b   
    add %b,%a       //p+=
    pop %b          //on remet l'indice
    add 1,%sp
    st %a,[%sp] 
    debugreg
    jmp retour

main:
    
    //vecteur vb
    ld vax,%a
    push %a

    //vecteur va
    ld vbx,%a
    push %a
    
    //n taille vecteur
    push 3  

    call prodscal
    debugreg
    //depiler tout le bordell
    reset
    